---
title: "Making A Firebase and React Todo App"
publishedAt: "2023-06-20"
lastUpdated: "2023-06-20"
---

## My Biggest Obstacle

Auth.currentUser?.uid was my biggest obstacle. It just wouldn't work for me at first. At some point I even tried to work around it and failed miserably. So I left the problem alone for a while. I slowly deleted duplicate code I wrote in a panic and simplified the problem.

I can't say exactly when auth.currentUser?.uid began working but I do have a theory. As I simplified my code, I compiled 1 instance of all the important Firebase stuff to stay organized.

```js
export const app = initializeApp(firebaseConfig);
export const db = getFirestore(app);
export const auth = getAuth(app);
```

Now my code is relatively simple.

```js
onAuthStateChanged(auth, (result) => {
  if (result == null) {
    redirect("/signin");
  }
});

...

const fetchPost = async () => { ... };

onSnapshot(todoCollection, (snapshot) => {
    fetchPost();
});

useEffect(() => {
  fetchPost();
}, []);

```
